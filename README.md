# Установка
Вам потребуется:
- Node.js
- npm
- git

Клонируем репозиторий (Либо скачайте папкой, если не используете git - Download ZIP):
```shell
git clone git@github.com:Entegrato/LitLanding.git
```
После переходим в консоли в папку. Запускаем установку модулей:
```shell
npm i
```
***Всё установлено!***

# Запуск рабочего режима:

Набираем в консоли:
```shell
make work
```
Далее произойдет такое:
```shell
Ente:LitLanding ente$ make work
gulp work
[02:51:37] Using gulpfile ~/DEV/LitLanding/gulpfile.js
[02:51:37] Starting 'nodemon'...
[02:51:38] Starting 'stylus-compile-minify'...
[02:51:38] Starting 'js-minify'...
[02:51:38] Finished 'js-minify' after 8.02 ms
[02:51:38] Finished 'nodemon' after 430 ms
[02:51:38] Starting 'browser-sync'...
[02:51:38] Finished 'browser-sync' after 61 ms
[02:51:38] [nodemon] 1.18.9
[02:51:38] [nodemon] to restart at any time, enter `rs`
[02:51:38] [nodemon] watching: app.js db/*.json /Users/ente/DEV/LitLanding/routes/**/*
[02:51:38] [nodemon] starting `node app.js`
[02:51:38] Finished 'stylus-compile-minify' after 179 ms
[02:51:38] Starting 'work'...
[02:51:38] Finished 'work' after 20 ms
[Browsersync] Proxying: http://localhost:8090
[Browsersync] Access URLs:
----------------------------------
    Local: http://localhost:4000
 External: http://192.168.1.71:4000
----------------------------------
```

Сборка запущена за 4000 порту. Страницы слушают изменения в файлах вёрстки и дата-файле, и автообновляются по сохранению файла. Открываем http://localhost:4000, теперь можно верстать.
Сервер открывает по-умолчанию www версию. Можно открыть http://localhost:4000/www/ и http://localhost:4000/pda/ отдельно - соответственно будут www и pda версии.

# Фишки

- Автообновление страниц при сохранении файлов
- Параметры под RMD и правую колонку
- PDA и WWW версии
- json файл для хранения всех данных для вёрстки при желании
- Можно и без модулей и прочего - тупо верстать в `/views/partials/CMS-PAGE.jade`


## Параметры
Каждая из страниц умеет работать с параметрами ?rmd=1 и ?rcol=1.

**rmd=1**  - Версия с rmd по сути должна отображать всё так же, как и rmd версия статей на литрес, однако разночтения всё-таки могут быть, если я ошибся при обработке макетов в Jade. 

**rcol=1** - Если вы верстаете страницу с правой колонкой - то добавляйте этот параметр, он ее отобразит.

## Автообновление и синхронизация скролла
Вы можете открыть сразу и www версию, и pda версию, и www версию с rmd и правой колонкой. Сколько хотите окон. Каждое сохранение файла произойдет сборка и автообновление ВСЕХ открытых окон с локалхостом, с внесением ваших изменений и переносом скролла туда, где вы были.

![alt text](https://github.com/Entegrato/LitLanding/blob/master/readme-gifs/autoreloadf.gif?raw=true)

## PDA и WWW версии
Должны работать идентично обычному литресу. Единственное - вырезаны все лишние скрипты, отслежки и прочее, чтобы не возникало исключений у JS, и при необходимости можно было писать инлайновый JS для лендинга. Не ждите чуда, если вы пишете запросы к серверу - этого не произойдет. Однако весь обычный простейший JS и JQuery должен исполниться без ошибок.

НЕ rmd версии точно выглядят как и обычный литрес, а вот с rmd версией могли произойти нестыковки, ибо я уже заленился два раза переводить и чистить вёрстку под локальную версию. Там просто добавлены файлы стилей и чуть изменены оболочки статей.

## Можно воспроизводить вёрстку из JSON data-файла
Если у вас 10-15 книг на лендинге - самым простым будет сначала заполнить data-файл по пути `/views/partials/data-object.json` И далее не повторять вёрстку, а воспроизвести модули через циклы или для каждого объекта, например. В тестовой сборке есть пример как это работает на примере `module1.jade` и `module2.jade`

## Тупо поверстать бы:
Просто откройте `/views/partials/CMS-PAGE.jade`, и начиная с `h1 Пустой заголовок` всё сносите, сидите верстаете. Все параметры и внешняя оболочка будут.

# Help

## html -> Jade || Jade -> html
Иногда бывает нужно перевести в jade кучу html скопировав его через outerHTML или еще как-то. Используем https://html2pug.herokuapp.com/, настройки под эту сборку на скрине ниже. Можно и из джейда в html и из html в jade быстро перебросить всё что нужно. Вместе со стилями и скриптами инзайном ест. Нажали `Convert`, `Ctrl+A` в нужном окне и вставляем себе в вёрстку.

![alt text](https://github.com/Entegrato/LitLanding/blob/master/readme-gifs/html-to-jade.png?raw=true)

## Как использовать Jade
Верстаем табами. Нода на таб правее чем предыдущая - значит внутренняя нода. Jade проставит закрывающие теги сам (И вообще обвалится если вёрстка невалидна, о причинах он сообщит, обработка ошибок встроена в сборщик). Но при этом Jade позволяет вычислять прямо в вёрстке яваскриптом, можно использовать внутреннии функции Jade для циклов, `if` или чего угодно - тут лучше просмотреть всю мощь в доках. Но начать на нем верстать можно часа за два.

В идеале прям сразу начать с хорошего и изначально создавать json с данными, а потом под необходимый функционал написать несколько mixin (модули, почти js функции, которые могут принимать значения). Поверьте, json нереально упрощает задачу переделок. Если заказчику потом нужно поменять одну книжку на другую или еще чего - не надо ползать по верстке искать где же там это вставлено.

- Доки: http://jade-lang.com/
- Прям очень простая статья: https://habr.com/post/278109/